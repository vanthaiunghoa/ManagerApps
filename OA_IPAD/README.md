# 万维博通智慧办公系统iPad版开发文档
本文档主要是介绍了项目的结构、开发进度、遇到的难点以及解决方式、测试覆盖点等等，在开发期间，我（廖超龙）
会随时更新本文档，以便把控进度和质量。

## TODO

-~~封装一个字典转模型文件的工具；嵌入到代码里面；在模拟器Debug的时候，自动根据字典转一个模型文件.h 和.m文件出来~~
- **POST请求的文件下载**
-  快速办理功能
- ~~列表页面~~、人员页面查询功能
- ~~完善个人信息、头像功能。~~
- 主页面未完成条数读取。
~~- 文件呈现表。~~
- ~~日期选择控件。~~
- ~~收文办理接口（在收文登记那里了）~~
- ~~收文办理显示纪录~~
- ~~收文查询的文件显示~~
- ~~列表选择弹窗~~
- 重构需要把打开SDK、下载、上传；集成到附件预览里面去统一处理。

## 项目的结构

项目大体上使用MVVM 模式，如果碰到一些实在太简单的，不需要绑定属性的界面，可以用简单的MVC来实现。

项目不允许MVC分别继承一个基类，经验所得，这样代码难以维护。

网络请求通过对象封装一个，序列化使用MJExtension。

使用Cocoapods管理开源库依赖。


### App Delegate
主要是App启动之后做的一些处理。

### Main
主页面，各个模块的入口

### Sections
从主页面点进去的子模块的功能。

### User
用户相关的处理，做成一个Service层；相关的界面也会放在这里

### Vendor
第三方SDK

### Core
核心层，任何界面开发都可以依赖这些东西，比如网络请求，数据缓存；这一层**必须**不能包含任何界面。
一些第三方的工具，如果不用Cocoapods集成，可以放在这里。

### Common Views
App自定义的一些弹窗或者蒙版之类的，table view cell最好别放这。


## 遇到的问题

### 领导审阅批注的问题（2018/3/24
~~考虑用插件还是绘制之后，生成一张image。~~

### 有一些点没测到
1. ~~附件显示、以及附件打开（没获取到数据）~~。
2. ~~发文办理的办理情况（记录获取不到）~~
3. 登录并没有用MD5传密码
4. ~~收文办理情况（纪录）接口无法调通~~
5.  用户信息无法获取
6. ~~无法找到收文办理意见保存、办完退出、转派文件的接口。~~
7. 收文查询的差两个数据：一个是办理状态、一个是签发时间
8. 办理跟踪、自动生成语句、派送文件、发送短信。多选。自动勾选自动生成语句、派送文件。这个接口没提供传值 。
9. 金格SDK崩溃；

### 需求不确定的点
~~1. 文档说：   转派文件（列出各单位名单，现阶段各个单位的转派页面是定制。） 如何定制法？~~


## 开发进度

### 2018年3月24日（星期六）
- 阅读需求、原型分析，初步建立了项目的大体结构，确定了开发文档。
- 使用MVVM搭建了登录界面；

### 2018年3月25日 （星期日）
- 编写网络请求基础类`RequestManager`
- 编写`UserService`，完成登录功能。
- 编写登录功能、接口功能单元测试。
- 初步搭建工作台
- 初步编写收发文列表的样式
- 无法完成快速办理功能

### 2018年3月29日（星期四）
- 经过分析、四个列表长得很像；决定复用界面、以及响应逻辑；用Protocol的形式解耦。
- 初步调通一个接口；

### 2018年3月30日（星期五）
- 接通列表页面
- 初步建立文件处理界面。

### 2018年3月31日至4月3日（星期二）
- 文件处理界面基本编写完成，还差一些选择界面和处理逻辑。
- 集成文件处理界面。
- 文件呈现表编写。
- 准备搭建其它界面（还差5个）

### 2018年4月4日（星期三）
- 发文办理列表初步完成。
- 发文办理页面初步完成；接口调通（界面还没对接上）

### 2018年4月5日-4月7日
- 发文办理页面基本开发完毕（除了日期选择）
- 发文查询页面开发完毕。
- 收文办理界面开发完。接口无法调试

### 4月8日~4月10日
- 收文查询页面开发完毕
- 收文纪录列表开发好。
-  初步开发会议功能；接口无法调试成功
- 准备完成收文办理功能；需要自定义列表选择（用一个TableView）
### 4.12
完成查询功能

## 参考链接
- [需求原型](https://pro.modao.cc/app/FY9yUv5H8JcGpINmU1VWxpoYLe40t70#screen=sC9C737E6FD1510218710430)
- [后台](http://121.15.203.82:9210/oasystem/Login/Index2.aspx) 
- [公文办理手续](https://baike.baidu.com/item/%E5%85%AC%E6%96%87%E5%8A%9E%E7%90%86%E7%A8%8B%E5%BA%8F/12748029?fr=aladdin)
- [UI标注 ](https://www.lanhuapp.com)
-

